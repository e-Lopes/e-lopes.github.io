<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Edit Decks - Digimon TCG</title>
        <link rel="icon" type="image/png" href="../icons/favicon/favicon.png" />
        <link rel="stylesheet" href="../styles.css" />
        <link rel="stylesheet" href="../styles/components/utilities.css" />
        <link rel="stylesheet" href="../styles/components/states.css" />
    </head>
    <body>
        <div class="container">
            <div class="decks-container">
                <!-- Navigation at top -->
                <div class="top-nav">
                    <a href="../index.html" class="nav-button">
                        <span>&larr; Back to Dashboard</span>
                    </a>
                </div>

                <div class="page-header">
                    <h1 class="page-title">Manage Decks</h1>
                    <div class="header-actions">
                        <div class="decks-total" id="decksTotalCount">Total: 0</div>
                        <button id="btnOpenCreateDeckModal" class="btn-primary" type="button">
                            <svg
                                class="btn-create-icon"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                aria-hidden="true"
                            >
                                <path d="M12 5v14M5 12h14" />
                            </svg>
                            Add
                        </button>
                    </div>
                </div>

                <div class="search-row">
                    <div class="search-box">
                        <input
                            type="text"
                            id="searchInput"
                            class="search-input"
                            placeholder="Search decks by name..."
                        />
                        <select
                            id="pageSizeSelect"
                            class="page-size-select"
                            title="Items per page"
                            aria-label="Items per page"
                        >
                            <option value="4">4</option>
                            <option value="8" selected>8</option>
                            <option value="12">12</option>
                            <option value="24">24</option>
                            <option value="40">40</option>
                            <option value="80">80</option>
                        </select>
                    </div>

                    <div class="decks-list-controls">
                        <select
                            id="deckRankFormatSelect"
                            class="deck-format-select"
                            title="Filtrar por formato"
                            aria-label="Filtrar por formato"
                        >
                            <option value="">All formats</option>
                        </select>
                        <select
                            id="deckRankMonthSelect"
                            class="deck-month-select"
                            title="Filtrar por mês"
                            aria-label="Filtrar por mês"
                        >
                            <option value="">Latest month</option>
                        </select>
                        <button
                            type="button"
                            id="viewToggleBtn"
                            class="btn-view-toggle"
                            title="Change view"
                            aria-label="Change view"
                        ></button>
                    </div>
                </div>

                <section class="decklist-mvp-panel" aria-labelledby="decklistMvpTitle">
                    <div class="decklist-mvp-header">
                        <h2 id="decklistMvpTitle">Decklist MVP</h2>
                        <div id="decklistMvpStats" class="decklist-mvp-stats">0 cards</div>
                    </div>
                    <p class="decklist-mvp-help">
                        Cole a decklist (qualquer um dos formatos) ou adicione cartas por codigo.
                    </p>

                    <div class="decklist-mvp-bulk">
                        <label for="decklistBulkInput">Import decklist</label>
                        <textarea
                            id="decklistBulkInput"
                            rows="8"
                            placeholder="Ex: 4 Puyoyomon BT22-001&#10;ou [&#34;BT22-001&#34;,&#34;BT22-001&#34;]&#10;ou 4 (BT22-001)"
                        ></textarea>
                        <div class="decklist-mvp-actions">
                            <button type="button" id="btnDecklistParse" class="btn-primary">
                                Parse list
                            </button>
                            <button type="button" id="btnDecklistClear" class="btn-secondary">
                                Clear
                            </button>
                        </div>
                    </div>

                    <div class="decklist-mvp-manual">
                        <label for="decklistManualCode">Add by code</label>
                        <div class="decklist-mvp-manual-row">
                            <input
                                type="text"
                                id="decklistManualCode"
                                class="form-input"
                                placeholder="BT22-001"
                                autocomplete="off"
                            />
                            <select id="decklistManualQty" aria-label="Quantity">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4" selected>4</option>
                            </select>
                            <button type="button" id="btnDecklistAddManual" class="btn-primary">
                                Add
                            </button>
                        </div>
                    </div>

                    <div id="decklistMvpErrors" class="decklist-mvp-errors" role="status"></div>
                    <div id="decklistMvpBoard" class="decklist-mvp-board" aria-live="polite"></div>
                </section>

                <div id="decksList" class="decks-grid">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading decks...</p>
                    </div>
                </div>

                <div id="emptyState" class="empty-state u-hidden">
                    <div class="empty-state-icon">&#127183;</div>
                    <h3>No decks registered</h3>
                    <p>Start by adding your first deck!</p>
                    <button type="button" id="btnEmptyStateAddDeck" class="btn-primary u-mt-20">
                        Add First Deck
                    </button>
                </div>

                <div id="noResults" class="empty-state u-hidden">
                    <div class="empty-state-icon">&#128269;</div>
                    <h3>No decks found</h3>
                    <p>Try searching with different terms.</p>
                    <button
                        type="button"
                        id="btnNoResultsClearSearch"
                        class="btn-secondary u-mt-20"
                    >
                        Clear search
                    </button>
                </div>
                <div class="pagination" id="decksPagination"></div>
            </div>
        </div>

        <div id="createDeckModalHost"></div>
        <div id="editDeckModalHost"></div>

        <script src="../config/supabase.js"></script>
        <script src="../config/api-client.js"></script>
        <script src="../config/ui-state.js"></script>
        <script src="../config/app-version.js"></script>
        <script src="create-deck/modal.js"></script>
        <script src="edit-deck/modal.js"></script>
        <script src="page.js"></script>
        <script src="../config/register-sw.js"></script>
    </body>
</html>
